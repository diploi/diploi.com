---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import {
  CodeBlock,
  Database,
  Eye,
  FolderUser,
  LaptopIcon,
  Lightning,
  LockKeyOpen,
  MouseSimple,
  SealCheckIcon,
} from '@phosphor-icons/react';
import AiHr from '../../ai/_components/AiHr.astro';
import vscodeLogo from '../../../images/vscode-logo.svg';
import cursorLogo from '../../../images/cursor-logo.webp';
import webstormLogo from '../../../images/webstorm-logo.svg';
import zedLogo from '../../../images/zed-logo.svg';
import githubLogo from '../../../images/github-logo.svg';
import githubActionsIcon from '../../../images/github-actions-icon.svg';

const components = await getCollection('component');
const icons = components
  .filter((component) => !component.data.hidden && component.data.identifier !== 'supabase')
  .slice(0, 24)
  .map((component) => component.data.icon);

const supabase = components.find((component) => component.data.identifier === 'supabase');
---

<ul class="features">
  <li>
    <SealCheckIcon />
    <h3>Pro Developer Workflow</h3>
    <ul class="logos">
      <li><Image width={40} height={40} src={githubLogo} alt="github logo" /></li>
      <li><Image width={40} height={40} src={githubActionsIcon} alt="github actions icon" /></li>
    </ul>
    <p>Get the proper software-dev workflow. Git, CI/CD, SSH, e.g.</p>
  </li>
  <AiHr vertical />
  <li>
    <CodeBlock />
    <h3>Use Any Editor</h3>
    <ul class="logos">
      <li><Image width={40} height={40} src={cursorLogo} alt="cursor logo" /></li>
      <li><Image width={40} height={40} src={zedLogo} alt="zed logo" /></li>
      <li><Image width={40} height={40} src={vscodeLogo} alt="vs code logo" /></li>
      <li><Image width={40} height={40} src={webstormLogo} alt="webstorm logo" /></li>
    </ul>
    <p>Use any editor you'd like with SSH remote support, like Cursor or Zed.</p>
  </li>
  <AiHr vertical />
  <li>
    <Database />
    <h3>Add Any Service</h3>
    <div class="components">
      <ul>
        <li>
          <img alt="supabase icon" src={`data:image/svg+xml;base64,${supabase?.data.icon}`} width={40} height={40} />
        </li>
      </ul>
      <ul>
        {
          icons.map((icon) => (
            <li>
              <img alt="component icon" src={`data:image/svg+xml;base64,${icon}`} width={16} height={16} />
            </li>
          ))
        }
      </ul>
    </div>
    <p>Host any of our supported services with your app, like Supabase or a CMS.</p>
  </li>
</ul>

<style lang="scss">
  .features {
    display: grid;
    grid-template-columns: 1fr 1px 1fr 1px 1fr;
    gap: 32px;

    @media (max-width: 860px) {
      grid-template-columns: 1fr;
      gap: 48px;

      :global(hr) {
        display: none;
      }
    }
  }

  li {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    min-width: 0;
  }

  li > svg {
    width: 32px;
    height: 32px;
  }

  a {
    text-underline-offset: 4px;
    color: inherit;
  }

  .logos {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
  }

  .components {
    display: flex;
    gap: 8px;

    > ul {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
  }
</style>
